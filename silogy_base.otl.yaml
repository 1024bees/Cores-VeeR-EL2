- name: verilator_build
  rule: raw_bash_build
  rule_args:
    cmds:
      - export RV_ROOT=$(pwd)
      - make -f $RV_ROOT/tools/Makefile verilator-build

- name: cmark
  rule: raw_bash
  rule_args:
    deps:
      - verilator_build
    cmds:
      - export RV_ROOT=$(pwd)
      - mkdir cmark && cd cmark;
      - ln -sfh ../obj_dir obj_dir
      - make -f $RV_ROOT/tools/Makefile program.hex TEST=cmark
      - ./obj_dir/Vtb_top

- name: hello_world
  rule: raw_bash
  rule_args:
    deps:
      - verilator_build
    cmds:
      - export RV_ROOT=$(pwd)
      - mkdir -p hello_world && cd hello_world;
      - ln -sfh ../obj_dir obj_dir
      - make -f $RV_ROOT/tools/Makefile program.hex TEST=hello_world
      - ./obj_dir/Vtb_top
